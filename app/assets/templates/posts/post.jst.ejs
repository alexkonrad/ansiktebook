<div class="post">
  <div class="group">
    <div class="post-image">
      <img src="<%= post.get('author').escape('profile_picture') %>"
           height=75
           width=75>
    </div>
    <div class="post-content">
      <a>
        <strong>
          <%= post.get('author').escape('username') %>
        </strong>
      </a>

    <% if (post.get('author') != post.get('recipient')) { %>
      <strong>
        >
      </strong>
      <a>
        <strong>
          <%= post.get('recipient').escape('username') %>
        </strong>
      </a>
    <% } %>

      <p class="post-text">
        <%= post.escape('text') %>
      </p>
    </div>
  </div>
  <div class="post-footer">
    <div class="likes <%= _.contains(post.get('liking_user_ids'), post.get('current_user_id')) ? "can-like" : "cannot-like" %>">
      <div class="post-footer-item unlike"><button>Unlike</button></div>
      <div class="post-footer-item like"><button>Like</button></div>
    </div>

    <div class="post-footer-item">
      posted <%= post.escape('created_at') %> ago
    </div>

    <div class="post-footer-item">
      <%= post.get('likes').count %>
      <%= post.get('likes').count == 1 ? "like" : "likes" %>
    </div>

    <% post.get('comments').each(function (comment) { %>
      <div class="group">
        <div class="comment-image">
          <img src="<%= comment.get('author').get('profile_picture') %>" height=75 width=75>
        </div>
        <div class="comment-content">
          <a href="#">
            <strong>
              <%= comment.get('author').escape('username') %>
            </strong>
          </a>
          <div class="comment-text">
            <%= comment.escape('body') %>
          </div>
        </div>
      <div class="post-footer-item comments delete-comment">
      <% if ((comment.get('author').get('id') == post.get('current_user_id')) ||
             (post.get('recipient').get('id') == post.get('current_user_id'))) { %>
        <button class="delete-comment-button">Delete</button>
      <% } %>
      </div>
    </div>
    <% }); %>

    <div class="post-footer-item comment">
      <form>
        <input type="textarea">
        <input type="submit" value="Comment">
      </form>
    </div>

    <div class="post-footer-item edit">
      <div class="edit-or-delete-comment">
      <% if (post.get('author').get('id') == post.get('current_user_id')) { %>
        <button class="edit-comment-button">Edit</button>
      <% } %>
      <% if (post.get('recipient').get('id') == post.get('current_user_id')) { %>
        <button>Delete</button>
      <% } %>
      </div>
    </div>
  </div>
</div>